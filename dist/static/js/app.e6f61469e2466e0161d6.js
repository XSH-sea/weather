webpackJsonp([1],{"6yEe":function(t,e){},BtjU:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("kV13"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=i("C7Lr")({name:"App"},a,!1,function(t){i("dJ8x")},null,null).exports,o=i("p7sN"),r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"error"}},[e("i",{staticClass:"iconfont icon-icon_warn_fill"}),this._v(" "),e("p",[this._v("获取数据失败")]),this._v(" "),e("p",[this._v("请检查网络是否已连接")])])}]};var c=i("C7Lr")({},r,!1,function(t){i("6yEe")},"data-v-045e0880",null).exports,l={name:"index",data:function(){return{errFlag:!1,Top:0,touch0:0,touch1:0,hourlyLeft:0,key:"415c7d28177f4749b004841b3f77b59c",cityName:"",nowCond:"晴",nowTmp:"0℃",aqi:"无法获取",lifeStyle:[{title:"穿衣指南",text:"无法获取"},{title:"旅游指南",text:"无法获取"},{title:"出行指南",text:"无法获取"},{title:"防晒指南",text:"无法获取"}],daily:[{date:"12.01",week:"星期一",tmp:"4~5℃",icon_url_d:"../../static/weather-icon/100.png",icon_url_n:"../../static/weather-icon/100n.png",cond_txt_d:"晴",cond_txt_n:"多云",sr:"07:36",ss:"19:23"},{date:"12.01",week:"星期一",tmp:"4~5℃",icon_url_d:"../../static/weather-icon/100.png",icon_url_n:"../../static/weather-icon/100n.png",cond_txt_d:"晴",cond_txt_n:"多云",sr:"07:36",ss:"19:23"},{date:"12.01",week:"星期一",tmp:"4~5℃",icon_url_d:"../../static/weather-icon/100.png",icon_url_n:"../../static/weather-icon/100n.png",cond_txt_d:"晴",cond_txt_n:"多云",sr:"07:36",ss:"19:23"},{date:"12.01",week:"星期一",tmp:"4~5℃",icon_url_d:"../../static/weather-icon/100.png",icon_url_n:"../../static/weather-icon/100n.png",cond_txt_d:"晴",cond_txt_n:"多云",sr:"07:36",ss:"19:23"},{date:"12.01",week:"星期一",tmp:"4~5℃",icon_url_d:"../../static/weather-icon/100.png",icon_url_n:"../../static/weather-icon/100n.png",cond_txt_d:"晴",cond_txt_n:"多云",sr:"07:36",ss:"19:23"},{date:"12.01",week:"星期一",tmp:"4~5℃",icon_url_d:"../../static/weather-icon/100.png",icon_url_n:"../../static/weather-icon/100n.png",cond_txt_d:"晴",cond_txt_n:"多云",sr:"07:36",ss:"19:23"},{date:"12.01",week:"星期一",tmp:"4~5℃",icon_url_d:"../../static/weather-icon/100.png",icon_url_n:"../../static/weather-icon/100n.png",cond_txt_d:"晴",cond_txt_n:"多云",sr:"07:36",ss:"19:23"}],hourly:[{time:"00:00",tmp:"21"},{time:"01:00",tmp:"18"},{time:"02:00",tmp:"19"},{time:"03:00",tmp:"15"},{time:"04:00",tmp:"18"},{time:"05:00",tmp:"18"},{time:"06:00",tmp:"21"},{time:"07:00",tmp:"29"},{time:"08:00",tmp:"10"},{time:"09:00",tmp:"21"},{time:"10:00",tmp:"21"},{time:"11:00",tmp:"21"},{time:"12:00",tmp:"21"},{time:"13:00",tmp:"25"},{time:"14:00",tmp:"21"},{time:"15:00",tmp:"18"},{time:"16:00",tmp:"21"},{time:"17:00",tmp:"16"},{time:"18:00",tmp:"21"},{time:"19:00",tmp:"21"},{time:"20:00",tmp:"19"},{time:"21:00",tmp:"21"},{time:"22:00",tmp:"21"},{time:"23:00",tmp:"25"}]}},created:function(){console.log(this.$store.state.cityName),this.cityName=this.$store.state.cityName,""===this.cityName?this.getLocation():this.getInfo()},mounted:function(){this.scroll(),console.log(this.daily,1)},methods:{scroll:function(){var t=this;console.log(this.$refs.ulEle.offsetHeight/5/10);var e=setInterval(function(){var e=0,i=setInterval(function(){t.Top-=t.$refs.ulEle.offsetHeight/5/11,11==++e&&clearInterval(i),t.Top<=-t.$refs.ulEle.offsetHeight/5*4&&(t.Top=0)},60);t.$once("hook:beforeDestroy",function(){clearInterval(i)})},3e3);this.$once("hook:beforeDestroy",function(){clearInterval(e)})},drawLine:function(){for(var t=[],e=[],i=[],s=0;s<this.hourly.length;s++)t.push(this.hourly[s].time),e.push(this.hourly[s].tmp);e.forEach(function(t){return i.push(t)}),i.sort(function(t,e){return t-e}),this.$echarts.init(this.$refs.hourly).setOption({xAxis:{data:t,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"rgba(28,120,135,0.8)"}},yAxis:{show:!1,max:i[i.length-1],min:i[0]},grid:{top:24,bottom:30,left:0,right:0},series:[{type:"line",data:e,label:{show:!0,color:"rgba(38,188,213,0.8)"},lineStyle:{color:"rgba(28,120,135,0.8)"},itemStyle:{color:"rgba(38,188,213,0.8)"},hoverAnimation:!1}]})},start:function(t){this.touch0=Math.floor(t.touches[0].clientX)},move:function(t){this.touch1=Math.floor(t.touches[0].clientX);var e=Math.floor(this.$refs.hourly.offsetLeft),i=Math.floor(this.$refs.hourly.offsetWidth),s=Math.floor(this.$refs.border.offsetWidth),a=this.touch0-this.touch1;this.hourlyLeft=e<=s-i&&a>0?s-i:e>=0&&a<0?0:e-a},end:function(t){this.touch0=0,this.touch1=0},goSearch:function(){this.$router.push("/search")},getLocation:function(){var t=this;AMap.plugin("AMap.CitySearch",function(){(new AMap.CitySearch).getLocalCity(function(e,i){"complete"===e&&"OK"===i.info?(t.cityName=i.city,t.getInfo()):(t.cityName="请手动选择城市",alert("抱歉，无法定位当前城市，请手动选择城市！"),t.goSearch())})})},getInfo:function(){var t=this,e="https://api.heweather.net/s6/weather/";this.axios.get(e+"now",{params:{key:this.key,location:this.cityName}}).then(function(e){t.nowCond=e.data.HeWeather6[0].now.cond_txt,t.nowTmp=e.data.HeWeather6[0].now.tmp+"℃"}).catch(function(e){console.log(e),t.errFlag=!0}),this.axios.get("https://api.heweather.net/s6/air/now",{params:{key:this.key,location:this.cityName}}).then(function(e){var i=e.data.HeWeather6[0].air_now_city.aqi,s=e.data.HeWeather6[0].air_now_city.qlty;t.aqi="空气指数"+i+" "+s}).catch(function(e){console.log(e),t.errFlag=!0}),this.axios.get(e+"lifestyle",{params:{key:this.key,location:this.cityName}}).then(function(e){var i=t.lifeStyle,s=e.data.HeWeather6[0].lifestyle;i[0].text=s[1].txt,i[1].text=s[4].txt,i[2].text=s[13].txt,i[3].text=s[12].txt}).catch(function(e){console.log(e),t.errFlag=!0}),this.axios.get(e+"hourly",{params:{key:this.key,location:this.cityName}}).then(function(e){for(var i=e.data.HeWeather6[0].hourly,s=0;s<24;s++)t.hourly[s].tmp=i[s].tmp,t.hourly[s].time=i[s].time.substring(11,16);t.drawLine()}).catch(function(e){console.log(e),t.errFlag=!0}),this.axios.get(e+"forecast",{params:{key:this.key,location:this.cityName}}).then(function(e){console.log(e);for(var i=e.data.HeWeather6[0].daily_forecast,s=t.daily,a=(new Date).getDay(),n=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],o=0;o<7;o++)a<7?(s[o].week=n[a],a++):(s[o].week=n[a-7],a++),s[o].date=i[o].date.substring(5,10).replace("-","."),s[o].tmp=i[o].tmp_min+"~"+i[o].tmp_max+"℃",s[o].cond_txt_d=i[o].cond_txt_d,s[o].cond_txt_n=i[o].cond_txt_n,s[o].icon_url_d="./static/img/"+i[o].cond_code_d+".png",100!=i[o].cond_code_n&&103!=i[o].cond_code_n&&104!=i[o].cond_code_n&&300!=i[o].cond_code_n&&301!=i[o].cond_code_n&&406!=i[o].cond_code_n&&407!=i[o].cond_code_n||(i[o].cond_code_n=i[o].cond_code_n+"n"),s[o].icon_url_n="./static/img/"+i[o].cond_code_n+".png",s[o].ss=i[o].ss,s[o].sr=i[o].sr}).catch(function(e){console.log(e),t.errFlag=!0})}},computed:{daily0:function(){return this.daily[0]},daily1:function(){for(var t=[],e=1;e<7;e++)t.push(this.daily[e]);return t}},components:{err:c}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"index"}},[i("div",{staticClass:"header"},[i("i",{staticClass:"iconfont icon-icon_add",on:{click:function(e){return t.goSearch()}}}),t._v(" "),i("p",{staticClass:"cityName"},[t._v(t._s(t.cityName))])]),t._v(" "),i("div",{staticClass:"cond"},[i("p",{staticClass:"nowCond"},[t._v(t._s(t.nowCond))]),t._v(" "),i("p",{staticClass:"nowTmp"},[t._v(t._s(t.nowTmp))]),t._v(" "),i("p",{staticClass:"aqi"},[t._v(t._s(t.aqi))])]),t._v(" "),i("div",{staticClass:"lifeStyle"},[i("div",{staticClass:"border"},[i("ul",{ref:"ulEle",style:{top:t.Top+"px"}},[t._l(t.lifeStyle,function(e,s){return i("li",{key:s},[i("p",{staticClass:"title"},[t._v(t._s(t.lifeStyle[s].title))]),t._v(" "),i("p",{staticClass:"text"},[t._v(t._s(t.lifeStyle[s].text))])])}),t._v(" "),i("li",[i("p",{staticClass:"title"},[t._v(t._s(t.lifeStyle[0].title))]),t._v(" "),i("p",{staticClass:"text"},[t._v(t._s(t.lifeStyle[0].text))])])],2)])]),t._v(" "),i("div",{ref:"border",staticClass:"hourly"},[i("div",{ref:"hourly",staticClass:"hourlyArea",style:{left:t.hourlyLeft+"px"},on:{touchstart:function(e){return t.start(e)},touchmove:function(e){return t.move(e)},touchend:function(e){return t.end(e)}}})]),t._v(" "),i("div",{staticClass:"daily"},[i("ul",[i("li",{staticClass:"daily0"},[i("div",{staticClass:"time"},[i("span",{staticClass:"date"},[t._v(t._s(t.daily0.date))]),t._v(" "),i("span",{staticClass:"week"},[t._v(t._s(t.daily0.week))])]),t._v(" "),i("div",{staticClass:"info"},[i("span",{staticClass:"day"},[i("img",{staticClass:"icon_d",attrs:{src:t.daily0.icon_url_d}}),t._v(" "),i("p",[t._v(t._s(t.daily0.cond_txt_d))])]),t._v(" "),i("span",{staticClass:"night"},[i("img",{staticClass:"icon_n",attrs:{src:t.daily0.icon_url_n}}),t._v(" "),i("p",[t._v(t._s(t.daily0.cond_txt_n))])])]),t._v(" "),i("div",{staticClass:"tmp"},[t._v(t._s(t.daily0.tmp))]),t._v(" "),i("div",{staticClass:"sun"},[i("span",{staticClass:"up"},[t._v("日出:"+t._s(t.daily0.sr))]),t._v(" "),i("span",{staticClass:"down"},[t._v("日落:"+t._s(t.daily0.ss))])])]),t._v(" "),t._l(t.daily1,function(e,s){return i("li",{key:s,staticClass:"daily1",class:(s+1)%2==0?"right":"left"},[i("div",{staticClass:"time"},[i("span",{staticClass:"date"},[t._v(t._s(e.date))]),t._v(" "),i("span",{staticClass:"week"},[t._v(t._s(e.week))])]),t._v(" "),i("div",{staticClass:"info"},[i("span",{staticClass:"day"},[i("img",{staticClass:"icon_d",attrs:{src:e.icon_url_d}}),t._v(" "),i("p",[t._v(t._s(e.cond_txt_d))])]),t._v(" "),i("span",{staticClass:"night"},[i("img",{staticClass:"icon_n",attrs:{src:e.icon_url_n}}),t._v(" "),i("p",[t._v(t._s(e.cond_txt_n))])])]),t._v(" "),i("div",{staticClass:"tmp"},[t._v(t._s(e.tmp))]),t._v(" "),i("div",{staticClass:"sun"},[i("span",{staticClass:"up"},[t._v("日出:"+t._s(e.sr))]),t._v(" "),i("span",{staticClass:"down"},[t._v("日落:"+t._s(e.ss))])])])})],2)]),t._v(" "),t.errFlag?i("err",{staticClass:"err"}):t._e()],1)},staticRenderFns:[]};var _=i("C7Lr")(l,h,!1,function(t){i("rxap")},"data-v-125e2af0",null).exports,d=i("3cXf"),u=i.n(d),p={data:function(){return{hotCity:[],cityList:[],history:[],errFlag:!1,searchFlag:!1,historyFlag:!0,keyWord:"请输入需要搜索的城市名称"}},created:function(){this.isHave(),this.getHotCity()},methods:{back:function(){this.$router.back(-1)},getHotCity:function(){var t=this;this.axios.get("https://search.heweather.net/top?group=cn&key=415c7d28177f4749b004841b3f77b59c").then(function(e){t.errFlag=!1;for(var i=e.data.HeWeather6[0].basic,s=0;s<i.length;s++)t.hotCity.push(i[s].location)}).catch(function(e){console.log(e),t.errFlag=!0})},clear:function(){this.keyWord="",this.searchFlag=!1},search:function(){var t=this;""!=this.keyWord&&"请输入需要搜索的城市名称"!=this.keyWord?this.axios.get("https://search.heweather.net/find?key=415c7d28177f4749b004841b3f77b59c&group=cn&number=10&location="+this.keyWord).then(function(e){console.log(e),"ok"==e.data.HeWeather6[0].status?(t.searchFlag=!0,t.cityList=e.data.HeWeather6[0].basic):"unknown location"==e.data.HeWeather6[0].status&&(t.keyWord="抱歉，该城市不存在，请重新查询。")}).catch(function(t){console.log(t)}):this.searchFlag},addHistory:function(t){var e=[];e=JSON.parse(localStorage.getItem("history")),console.log(JSON.parse(localStorage.getItem("history"))),e.indexOf(t)>-1?(this.$store.state.cityName=t,this.$router.push("/")):(e.push(t),localStorage.setItem("history",u()(e)),this.historyFlag=!0,this.history=e,console.log(JSON.parse(localStorage.getItem("history"))),this.$store.state.cityName=t,this.$router.push("/"))},delHistory:function(){localStorage.removeItem("history"),this.historyFlag=!1},isHave:function(){if(null==JSON.parse(localStorage.getItem("history"))||0==JSON.parse(localStorage.getItem("history")).length){localStorage.setItem("history",u()([])),this.historyFlag=!1}else this.historyFlag=!0,this.history=JSON.parse(localStorage.getItem("history"))},refreshto:function(t){this.$store.state.cityName=t,this.$router.push("/")}},components:{err:c}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"search"}},[i("div",{staticClass:"header"},[i("i",{staticClass:"back iconfont icon-icon_left",on:{click:function(e){return t.back()}}}),t._v(" "),i("p",{staticClass:"title"},[t._v("添加城市")])]),t._v(" "),i("div",{staticClass:"searchBox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWord,expression:"keyWord"}],attrs:{type:"search",name:"",id:""},domProps:{value:t.keyWord},on:{focus:function(e){return t.clear()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||(t.keyWord=e.target.value)}}}),t._v(" "),i("i",{staticClass:"iconfont icon-icon_search",on:{click:function(e){return t.search()}}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.searchFlag,expression:"searchFlag"}],staticClass:"list"},[i("ul",t._l(t.cityList,function(e,s){return i("li",{key:s,on:{click:function(i){return t.addHistory(e.location)}}},[t._v(t._s(e.location)+"-"+t._s(e.parent_city)+"-"+t._s(e.admin_area))])}),0)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.historyFlag,expression:"historyFlag"}],staticClass:"history"},[i("div",{staticClass:"title"},[i("h3",[t._v("搜索历史")]),t._v(" "),i("i",{staticClass:"iconfont icon-icon_delete",on:{click:t.delHistory}})]),t._v(" "),i("ul",t._l(t.history,function(e,s){return i("li",{key:s,on:{click:function(i){return t.refreshto(e)}}},[t._v(t._s(e))])}),0)]),t._v(" "),i("div",{staticClass:"hotCity"},[i("h3",[t._v("热门城市")]),t._v(" "),i("ul",t._l(t.hotCity,function(e,s){return i("li",{key:s,on:{click:function(i){return t.refreshto(e)}}},[t._v(t._s(e))])}),0)]),t._v(" "),t.errFlag?i("err",{staticClass:"err"}):t._e()],1)},staticRenderFns:[]};var m=i("C7Lr")(p,f,!1,function(t){i("BtjU")},"data-v-fe8f9154",null).exports;s.a.use(o.a);var y=new o.a({routes:[{path:"/",name:"index",component:_},{path:"/search",name:"search",component:m}]}),v=i("LByM"),g=i.n(v),x=(i("D0oh"),i("I29D")),C=i.n(x),w=i("Iufj"),k=i.n(w),b=i("48sp");s.a.use(b.a);var S=new b.a.Store({state:{cityName:""}});s.a.config.productionTip=!1,s.a.prototype.$echarts=g.a,s.a.use(k.a,C.a),new s.a({el:"#app",router:y,store:S,components:{App:n},template:"<App/>"})},dJ8x:function(t,e){},rxap:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e6f61469e2466e0161d6.js.map